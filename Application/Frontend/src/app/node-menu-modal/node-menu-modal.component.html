<h1> Properties of "{{modalService.currNodeData.text}}"</h1>
<div style="width: 100%;">
    <mat-tab-group dynamicHeight="true" id="nodeMenu" (selectedTabChange)="tabClick($event)" [selectedIndex]="tabNum"
        (selectedIndexChange)="tabNum=$event">
        <!-- Details tab -->
        <mat-tab label="Details">
            <div class="tab-content" style="justify-content: center; position: relative;">
                <!-- <div id="detailsTable" style="width: fit-content;" class="table table-hover borderless table-vcenter"> -->
                <div style="margin: 2%;">
                    <!-- <span> -->
                    <mat-form-field style="width: 50%;" appearance="outline">
                        <mat-label style="font-size: 20px;">Node's text:</mat-label>
                        <input matInput type="text" id="textFeature" class="form-control" name="objectText"
                            [(ngModel)]="this.modalService.currNodeData.text" style="text-align: center;">
                    </mat-form-field>
                    <br>
                    <mat-form-field style="width: 50%;" appearance="outline">
                        <mat-label style="font-size: 20px;">Node's description:</mat-label>
                        <textarea matInput id="descriptionFeature" name="objectDescription" class="form-control"
                            [(ngModel)]="this.modalService.currNodeData.description"
                            style="vertical-align: top; text-align: center;" rows="3"></textarea>
                    </mat-form-field>

                    <!-- </span> -->
                </div>
            </div>
        </mat-tab>

        <!-- references tab -->
        <mat-tab label="References">
            <div class="tab-content">
                <!-- menu refs -->
                <mat-toolbar style="background-color: inherit;">
                    <mat-toolbar-row>
                        <div class="upperMenu">
                            <button mat-icon-button (click)="doShowAllRefs = !doShowAllRefs">
                                <mat-icon matTooltip="Show All" *ngIf="!doShowAllRefs">arrow_forward</mat-icon>
                                <mat-icon matTooltip="Hide All" *ngIf="doShowAllRefs">arrow_back</mat-icon>
                            </button>
                            <button mat-icon-button
                                [disabled]="this.allRefSelection.selected.length == 0 || mapHandler.getUserPermission() &lt; 2"
                                (click)=" addRefToNode()">
                                <mat-icon matTooltip="Add References">add_to_photos</mat-icon>
                            </button>
                            <button mat-icon-button
                                [disabled]="this.nodeRefSelection.selected.length == 0 || mapHandler.getUserPermission() &lt; 2"
                                (click)="removeRefToNode()">
                                <mat-icon matTooltip="Remove
                                References">delete_sweep</mat-icon>
                            </button>
                            <button mat-icon-button (click)="openNewRefModal('newRefModal')">
                                <mat-icon matTooltip="Create New
                            Reference">post_add</mat-icon>

                            </button>
                        </div>
                    </mat-toolbar-row>
                </mat-toolbar>

                <!-- node refs -->
                <span id="nodeRefsSpan" style="float: left; position: relative;" class="mat-elevation-z8">
                    <div style="width: 100%;">
                        <h3> The references of "{{modalService.currNodeData.text}}" </h3>

                        <!-- filter node refs -->
                        <div class="filterAndClear" style="padding: 2%;">
                            <span>
                                <mat-form-field style="width: 80%;">
                                    <mat-label>Filter</mat-label>
                                    <input matInput (keyup)="applyFilterNodeRefs($event)">
                                </mat-form-field>
                            </span>
                            <span>
                                <button mat-icon-button [disabled]='this.nodeRefSelection.selected.length == 0'
                                    (click)="this.nodeRefSelection.clear()" style="margin: 10px;">
                                    <mat-icon matTooltip="Clear Selection">check_box_outline_blank</mat-icon>
                                </button>
                            </span>
                        </div>
                    </div>
                    <!-- node refs table -->
                    <table id="nodeRefsTbl" mat-table [dataSource]="nodeRefSource">
                        <!-- Checkbox Column -->
                        <ng-container matColumnDef="select">
                            <tr>
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? masterToggle('nodeRefs') : null"
                                        [checked]="nodeRefSelection.hasValue() && isAllSelected('nodeRefs')"
                                        [indeterminate]="nodeRefSelection.hasValue() && !isAllSelected('nodeRefs')">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()"
                                        (change)="$event ? nodeRefSelection.toggle(row) : null"
                                        [checked]="nodeRefSelection.isSelected(row)">
                                    </mat-checkbox>
                                </td>
                            </tr>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="Title">
                            <th mat-header-cell *matHeaderCellDef> Title </th>
                            <td mat-cell *matCellDef="let element"> {{element.Title}} </td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="Publication">
                            <th mat-header-cell *matHeaderCellDef> Publication </th>
                            <td mat-cell *matCellDef="let element"> {{element.Publication}} </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="Link">
                            <th mat-header-cell *matHeaderCellDef> Link </th>
                            <td mat-cell *matCellDef="let element"> {{element.Link}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="CreationTime">
                            <th mat-header-cell *matHeaderCellDef> Creation Time </th>
                            <td mat-cell *matCellDef="let element"> {{element.CreationTime}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsRefs"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsRefs;"
                            (click)="nodeRefSelection.toggle(row)">
                        </tr>


                    </table>
                    <div style="position: relative; bottom: 0; width: 100%;">
                        <span style="float: left;">
                            <mat-paginator #nodeRefsPaginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons>
                            </mat-paginator>
                        </span>
                    </div>
                </span>

                <!-- all refs  -->
                <span id="allRefsSpan" style="float: right; position: relative;" class="mat-elevation-z8"
                    [hidden]="!this.doShowAllRefs">
                    <h3>All references</h3>
                    <!-- filter -->
                    <div class="filterAndClear">
                        <span>
                            <mat-form-field style="width: 80%;">
                                <mat-label>Filter</mat-label>
                                <input matInput (keyup)="applyFilterAllRefs($event)">
                            </mat-form-field>
                        </span>
                        <span>
                            <button mat-icon-button [disabled]='this.allRefSelection.selected.length == 0'
                                (click)="this.allRefSelection.clear()">
                                <mat-icon matTooltip="Clear Selection">check_box_outline_blank</mat-icon>
                            </button>
                        </span>
                    </div>
                    <!-- all refs table -->
                    <table id="allRefsTbl" mat-table [dataSource]="allRefSource">
                        <!-- Checkbox Column -->
                        <ng-container matColumnDef="select">
                            <tr>
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? masterToggle('allRefs') : null"
                                        [checked]="allRefSelection.hasValue() && isAllSelected('allRefs')"
                                        [indeterminate]="allRefSelection.hasValue() && !isAllSelected('allRefs')">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()"
                                        (change)="$event ? allRefSelection.toggle(row) : null"
                                        [checked]="allRefSelection.isSelected(row)">
                                    </mat-checkbox>
                                </td>
                            </tr>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="Title">
                            <th mat-header-cell *matHeaderCellDef> Title </th>
                            <td mat-cell *matCellDef="let element"> {{element.Title}} </td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="Publication">
                            <th mat-header-cell *matHeaderCellDef> Publication </th>
                            <td mat-cell *matCellDef="let element"> {{element.Publication}} </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="Link">
                            <th mat-header-cell *matHeaderCellDef> Link </th>
                            <td mat-cell *matCellDef="let element"> {{element.Link}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="CreationTime">
                            <th mat-header-cell *matHeaderCellDef> Creation Time </th>
                            <td mat-cell *matCellDef="let element"> {{element.CreationTime}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsRefs"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsRefs;"
                            (click)="allRefSelection.toggle(row)">
                        </tr>


                    </table>
                    <div style="position: relative; bottom: 0;">
                        <span style="float: right;">
                            <mat-paginator #allRefsPaginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons>
                            </mat-paginator>
                        </span>
                    </div>
                </span>
            </div>
        </mat-tab>

        <!-- contexts tab -->
        <mat-tab label="Contexts">
            <div class="tab-content">

                <!-- menu ctxs -->
                <mat-toolbar style="background-color: inherit;">
                    <mat-toolbar-row>
                        <div class="upperMenu">
                            <button mat-icon-button (click)="doShowAllCtxs = !this.doShowAllCtxs">
                                <mat-icon matTooltip="Show All" *ngIf="!doShowAllCtxs">arrow_forward</mat-icon>
                                <mat-icon matTooltip="Hide All" *ngIf="doShowAllCtxs">arrow_back</mat-icon>
                            </button>
                            <button mat-icon-button
                                [disabled]="this.allCtxsSelection.selected.length == 0 || mapHandler.getUserPermission() &lt; 2"
                                (click)="addCtxsToNode()">
                                <mat-icon matTooltip="Add Contexts">add_to_photos</mat-icon>
                            </button>
                            <button mat-icon-button
                                [disabled]="this.nodeCtxsSelection.selected.length == 0 || mapHandler.getUserPermission() &lt; 2"
                                (click)="removeCtxsToNode()">
                                <mat-icon matTooltip="Remove Contexts">delete_sweep</mat-icon>
                            </button>
                            <button mat-icon-button (click)="openNewCtxModal('newCtxModal')">
                                <mat-icon matTooltip="Create New Contexts">post_add</mat-icon>

                            </button>
                        </div>
                    </mat-toolbar-row>
                </mat-toolbar>

                <!-- node ctxs -->
                <span id="nodeCtxsSpan" style="float: left; position: relative;" class="mat-elevation-z8">
                    <div style="width: 100%;">
                        <h3> The contexts of "{{modalService.currNodeData.text}}"</h3>
                        <!-- filter -->
                        <div class="filterAndClear">
                            <span>
                                <mat-form-field style="width: 80%;">
                                    <mat-label>Filter</mat-label>
                                    <input matInput (keyup)="applyFilterNodeCtxs($event)">
                                </mat-form-field>
                            </span>
                            <span>
                                <button mat-icon-button [disabled]='this.nodeCtxsSelection.selected.length == 0'
                                    (click)="this.nodeCtxsSelection.clear()">
                                    <mat-icon matTooltip="Clear Selection"> check_box_outline_blank </mat-icon>
                                </button>
                            </span>
                        </div>
                    </div>

                    <!-- node ctxs table -->
                    <table id="nodeCtxsTbl" mat-table [dataSource]="nodeCtxsSource">
                        <!-- Checkbox Column -->
                        <ng-container matColumnDef="select">
                            <tr>
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? masterToggle('nodeCtxs') : null"
                                        [checked]="nodeCtxsSelection.hasValue() && isAllSelected('nodeCtxs')"
                                        [indeterminate]="nodeCtxsSelection.hasValue() && !isAllSelected('nodeCtxs')">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()"
                                        (change)="$event ? nodeCtxsSelection.toggle(row) : null"
                                        [checked]="nodeCtxsSelection.isSelected(row)">
                                    </mat-checkbox>
                                </td>
                            </tr>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="Title">
                            <th mat-header-cell *matHeaderCellDef> Title </th>
                            <td mat-cell *matCellDef="let element"> {{element.Title}} </td>
                        </ng-container>

                        <!-- creation time Column -->
                        <ng-container matColumnDef="CreationTime">
                            <th mat-header-cell *matHeaderCellDef> Creation Time </th>
                            <td mat-cell *matCellDef="let element"> {{element.CreationTime}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsCtxs"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsCtxs;"
                            (click)="nodeCtxsSelection.toggle(row)">
                        </tr>


                    </table>
                    <div style="position: relative; bottom: 0; width: 100%;">
                        <span style="float: left;">
                            <mat-paginator #nodeCtxsPaginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons>
                            </mat-paginator>
                        </span>
                    </div>
                </span>

                <!-- all ctxs -->
                <span id="allCtxsSpan" style="float: right; position: relative; " [hidden]="!this.doShowAllCtxs"
                    class="mat-elevation-z8">
                    <div style="width: 100%;">
                        <h3>All contexts</h3>
                        <div class="filterAndClear">
                            <span>
                                <mat-form-field style="width: 80%;">
                                    <mat-label>Filter</mat-label>
                                    <input matInput (keyup)="applyFilterAllCtxs($event)">
                                </mat-form-field>
                            </span>
                            <span style="float: right; ">
                                <button mat-icon-button [disabled]='allCtxsSelection.selected.length == 0'
                                    (click)="this.allCtxsSelection.clear()">
                                    <mat-icon matTooltip="Clear Selection"> check_box_outline_blank </mat-icon>
                                </button>
                            </span>
                        </div>
                    </div>

                    <!-- all ctxs table -->
                    <table id="allCtxsTbl" mat-table [dataSource]="allCtxsSource">
                        <!-- Checkbox Column -->
                        <ng-container matColumnDef="select">
                            <tr>
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? masterToggle('allCtxs') : null"
                                        [checked]="allCtxsSelection.hasValue() && isAllSelected('allCtxs')"
                                        [indeterminate]="allCtxsSelection.hasValue() && !isAllSelected('allCtxs')">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()"
                                        (change)="$event ? allCtxsSelection.toggle(row) : null"
                                        [checked]="allCtxsSelection.isSelected(row)">
                                    </mat-checkbox>
                                </td>
                            </tr>
                        </ng-container>

                        <!-- Position Column -->
                        <ng-container matColumnDef="Title">
                            <th mat-header-cell *matHeaderCellDef> Title </th>
                            <td mat-cell *matCellDef="let element"> {{element.Title}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="CreationTime">
                            <th mat-header-cell *matHeaderCellDef> Creation Time </th>
                            <td mat-cell *matCellDef="let element"> {{element.CreationTime}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsCtxs"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsCtxs;"
                            (click)="allCtxsSelection.toggle(row)">
                        </tr>


                    </table>
                    <div style="position: relative; bottom: 0;">
                        <span style="float: right;">
                            <mat-paginator #allCtxssPaginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons>
                            </mat-paginator>

                        </span>

                    </div>
                </span>
            </div>
        </mat-tab>

        <!-- node styles -->
        <mat-tab label="Styles">
            <div class="tab-content" (change)="setNodeStyles()">
                <div style=" width: 100%;">
                    <h3 style="font-size: 20px;">Change the appearance of "{{modalService.currNodeData.text}}"</h3>
                    <div class="mat-elevation-z8"
                        style="width: 30%; display: inline-block; margin: 20px; vertical-align: top ">
                        <h3> Fill: </h3>
                        <mat-form-field appearance="outline" style="width: 90%;">
                            <mat-label class=" small-menu-option">Color</mat-label>
                            <input matInput type="color" [(ngModel)]="shapeColor" />
                        </mat-form-field>
                        <br>
                    </div>
                    <div class="mat-elevation-z8"
                        style="width: 30%; display: inline-block; margin: 20px; vertical-align: top">
                        <h3> Border: </h3>
                        <mat-form-field appearance="outline" style="width: 90%;">
                            <mat-label class="small-menu-option">Color</mat-label>
                            <input matInput type="color" [(ngModel)]="borderColor" />
                        </mat-form-field>
                        <br>

                        <mat-form-field class="node-style-select" appearance="outline" style="width: 90%;">
                            <mat-label>Thickness</mat-label>
                            <mat-select matInput (selectionChange)="setNodeStyles()" [(value)]="borderThickness">
                                <mat-option value="1">1px</mat-option>
                                <mat-option value="2">2px</mat-option>
                                <mat-option value="3">3px</mat-option>
                                <mat-option value="4">4px</mat-option>
                                <mat-option value="5">5px</mat-option>
                                <mat-option value="6">6px</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </div>


            <!-- <input type="button" [(colorPicker)]="color" [style.background]="color" /> -->
        </mat-tab>

        <!-- comment tab -->
        <mat-tab label="Comments">
            <div class="tab-content">
                <div class="my-table mat-elevation-z8">
                    <div class="filterAndClear">
                        <span>
                            <mat-form-field style="width: 80%;">
                                <mat-label>Filter</mat-label>
                                <input matInput (keyup)="applyFilterAComments($event)">
                            </mat-form-field>
                        </span>
                        <span>
                            <button mat-icon-button matTooltip="New Comment"
                                (click)="modalService.open('newCommentModal')" style="display: flex; float: right;">
                                <mat-icon style="font-size: 25px;">add_comment</mat-icon>
                                <span style="display: flex;">Add Comment</span>
                            </button>
                        </span>
                    </div>
                    <table mat-table [dataSource]="nodeCommentsSource" matSort>

                        <!-- Action Column -->
                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element" class="action-link" style="width: 15%;">
                                <button mat-icon-button (click)="element.editCommentButton = !element.editCommentButton"
                                    [disabled]="!isMyComment(element)" style="float: left;">
                                    <!-- <mat-icon>create</mat-icon> -->
                                    <span class="k-icon k-i-pencil" style="font-size: 20px"></span>
                                </button>
                                <button mat-icon-button (click)="deleteComment(element)"
                                    [disabled]="!isMyComment(element)" style="float: left;">
                                    <!-- <mat-icon>delete_forever</mat-icon> -->
                                    <span class="k-icon k-i-delete" style="font-size: 20px"></span>
                                </button>
                            </td>
                        </ng-container>

                        <!-- Content Column -->
                        <ng-container matColumnDef="Content">
                            <th mat-header-cell *matHeaderCellDef> The Comment</th>
                            <td mat-cell *matCellDef="let element" style="width: 60%;">
                                <span *ngIf="element.editCommentButton">
                                    <mat-form-field floatLabel="never" style="width: 80%;">
                                        <input matInput placeholder="Content" [value]="element.Content"
                                            [(ngModel)]="element.Content">
                                    </mat-form-field>
                                    <button mat-icon-button
                                        (click)="editComment(element); element.editCommentButton = !element.editCommentButton">
                                        <!-- <mat-icon>done</mat-icon> -->
                                        <span class="k-icon k-i-check" style="font-size: 20px"></span>
                                    </button>
                                </span>
                                <span *ngIf="!element.editCommentButton"> {{element.Content}} </span>
                            </td>

                        </ng-container>

                        <!-- commentor name Column -->
                        <ng-container matColumnDef="CreatorName">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition='after'> Commenter </th>
                            <td mat-cell *matCellDef="let element" style="width: 10%; ">
                                {{element.CreatorName}} </td>
                        </ng-container>

                        <!-- Last Modification Time Column -->
                        <ng-container matColumnDef="LastModificationTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition='after'> Last Modified
                            </th>
                            <td mat-cell *matCellDef="let element" style="width: 10%;">
                                {{element.LastModificationTime}} </td>
                        </ng-container>

                        <!-- Likes Column -->
                        <ng-container matColumnDef="Likes">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition='after'> Likes </th>
                            <td mat-cell *matCellDef="let element" class="action-link">
                                <button mat-icon-button (click)="addLikeToComment(element)"
                                    [disabled]="isMyComment(element)">
                                    <mat-icon>thumb_up</mat-icon> {{element.Likes}}
                                </button>

                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsComments"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsComments;"></tr>
                    </table>
                    <div style="position: relative; bottom: 0;">
                        <span style="float: center; width: 100%;">
                            <mat-paginator style="float: center; width: 100%;" #commentsPaginator
                                [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
                            </mat-paginator>

                        </span>

                    </div>
                </div>
            </div>
        </mat-tab>

        <!-- connections tab -->
        <mat-tab label="Connections">
            <div class="tab-content">
                <div id="connectionsTable" class="my-table mat-elevation-z8"
                    style="float: left; position: relative; width: 49%;">
                    <h3> The connections from "{{modalService.currNodeData.text}}"</h3>
                    <div>
                        <div class="filterAndClear">
                            <span>
                                <mat-form-field style="width: 90%;">
                                    <mat-label>Filter</mat-label>
                                    <input matInput (keyup)="applyFilterAConnections($event)">
                                </mat-form-field>
                            </span>
                        </div>

                        <table mat-table [dataSource]="nodeConnectionSource" matSort>

                            <!-- Action Column -->
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef> </th>
                                <td mat-cell *matCellDef="let map" class="action-link" style="width: 40%;">
                                    <button mat-icon-button style="font-size: 20px; float: left; position: relative;"
                                        (click)="deleteConnection(map)" matTooltip="Delete connection">
                                        <span class="k-icon k-i-delete"></span>
                                    </button>
                                    <button mat-icon-button style="font-size: 20px; float: left; position: relative;"
                                        (click)="moveToConnectedMap(map)" matTooltip="Go to map">
                                        <span class="k-icon k-i-hyperlink-open"></span>
                                    </button>
                                </td>
                            </ng-container>

                            <!-- connected map name Column -->
                            <ng-container matColumnDef="mapName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition='after'> Map </th>
                                <td mat-cell *matCellDef="let map">
                                    {{map.MapName}}
                                </td>
                            </ng-container>

                            <!-- connected node name Column -->
                            <ng-container matColumnDef="nodeName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition='after'> Node </th>
                                <td mat-cell *matCellDef="let map">
                                    {{map.nodeText}}
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumnsConnections"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsConnections;"></tr>
                        </table>

                        <div style="position: relative; bottom: 0;">
                            <span style="float: center; width: 100%;">
                                <mat-paginator style="float: center; width: 100%;" #connectedPaginator
                                    [pageSizeOptions]="pageSizeOptions">
                                </mat-paginator>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- <mat-divider vertical style="position: relative; height: 40%;"></mat-divider> -->

                <div id="addConnectionTable" class="mat-elevation-z8"
                    style="float: right; position: relative; width: 49%; margin-bottom: 10px;">
                    <h3 style="width: 100%;"> Add new connections to "{{modalService.currNodeData.text}}"</h3>
                    <div class="filterAndClear">
                        <span>
                            <mat-form-field style="width: 78%; margin-left: 2px;">
                                <mat-label>Node Text</mat-label>
                                <input matInput [(ngModel)]="nodeToSearch" (keyup.enter)="searchNodes()">
                            </mat-form-field>
                        </span>
                        <span>
                            <button mat-icon-button (click)="clearSearches()" matTooltip="Clear search">
                                <mat-icon>clear</mat-icon>
                                <!-- <span class="k-icon k-i-close" style="font-size: 20px"></span> -->
                            </button>
                            <button mat-icon-button (click)="searchNodes()" matTooltip="Search">
                                <!-- <span class="k-icon k-i-search" style="font-size: 20px"></span> -->
                                <mat-icon>search</mat-icon>
                            </button>
                        </span>
                    </div>

                    <table mat-table [dataSource]="containingMapsList">
                        <!-- Checkbox Column -->
                        <ng-container matColumnDef="select">
                            <tr>
                                <th mat-header-cell *matHeaderCellDef style="width: 5%;">
                                    <mat-checkbox style=" float: left; position: relative;"
                                        (change)="$event ? masterToggle('addConnection') : null"
                                        [checked]="mapsSelectedOptions.hasValue() && isAllSelected('addConnection')"
                                        [indeterminate]="mapsSelectedOptions.hasValue() && !isAllSelected('addConnection')">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row" style="width: 5%;">
                                    <mat-checkbox style="float: left; position: relative;"
                                        (click)="$event.stopPropagation()"
                                        (change)="$event ? mapsSelectedOptions.toggle(row) : null"
                                        [checked]="mapsSelectedOptions.isSelected(row)">
                                    </mat-checkbox>
                                </td>
                            </tr>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="mapName">
                            <th mat-header-cell *matHeaderCellDef> Map </th>
                            <td mat-cell *matCellDef="let map"> {{map.MapName}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsConnectionsSearchResults"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsConnectionsSearchResults;"
                            (click)="mapsSelectedOptions.toggle(row)">
                        </tr>


                    </table>
                    <div style="position: relative; bottom: 0;">
                        <span style="float: center; width: 100%;">
                            <mat-paginator style="float: center; width: 100%;" #addConnectionPaginator
                                [pageSizeOptions]="pageSizeOptions">
                            </mat-paginator>
                        </span>
                    </div>

                    <button mat-raised-button (click)="addNewConnection()"
                        [disabled]="mapsSelectedOptions.selected.length == 0" style="margin: 10px;"> Connect </button>
                </div>
            </div>



            <!-- <h2 style="font-family:  'Calibri', ssans-seif;">Add Connection</h2> -->



            <!-- </div> -->

            <!-- <div id="chooseConnectionDiv" style="width: 50%; float: right;">
                <h2 style="font-family:  'Calibri', ssans-seif;">Connected Maps</h2>
                <div style=" width: max-content;">
                    <mat-selection-list>
                        <button mat-list-item (click)="moveToConnectedMap(map)" *ngFor="let map of connectedMapsList">
                            {{map.MapName}} </button>

                    </mat-selection-list>
                </div>
            </div> -->

        </mat-tab>
    </mat-tab-group>


</div>

<!-- create new ref modal -->
<jw-modal class="jw-modal" id="newRefModal">
    <div ngDraggable class="jw-modal-body">
        <span class="close" (click)="closeNewRefModal('newRefModal')">&times;</span>
        <div class="new-ref-modal-form">
            <form [formGroup]="newRefForm" (ngSubmit)="addNewRef()">
                <h1>Create New Reference</h1>
                <mat-form-field appearance="outline">
                    <mat-label>Title</mat-label>
                    <input matInput formControlName="title" required>
                </mat-form-field>
                <br>
                <mat-form-field appearance="outline">
                    <mat-label>Authors</mat-label>
                    <input matInput formControlName="authors">
                </mat-form-field>
                <br>
                <mat-form-field appearance="outline">
                    <mat-label>Publication
                    </mat-label>
                    <input matInput formControlName="publication">
                </mat-form-field>
                <br>
                <mat-form-field appearance="outline">
                    <mat-label>Description</mat-label>
                    <textarea matInput formControlName="description"></textarea>
                </mat-form-field>
                <br>
                <mat-form-field appearance="outline">
                    <mat-label>Link
                    </mat-label>
                    <input matInput formControlName="link">
                </mat-form-field>
                <br>
                <button type="submit" mat-raised-button>Add</button>
            </form>
        </div>
    </div>
</jw-modal>

<!-- create new ctx modal -->
<jw-modal class="jw-modal" id="newCtxModal">
    <div ngDraggable class="jw-modal-body">
        <span class="close" (click)="closeNewCtxModal('newCtxModal')">&times;</span>
        <div class="new-ref-modal-form">
            <form [formGroup]="newCtxForm" (ngSubmit)="addNewCtx()">
                <h1>Create New Context</h1>
                <mat-form-field appearance="outline">
                    <mat-label>Title</mat-label>
                    <input matInput formControlName="title" required>
                </mat-form-field>
                <br>
                <button type="submit" mat-raised-button>Add</button>
            </form>
        </div>
    </div>
</jw-modal>

<!-- create new comment modal -->
<jw-modal class="jw-modal" id="newCommentModal">
    <div ngDraggable class="jw-modal-body">
        <span class="close" (click)="closeNewCommentModal('newCommentModal')">&times;</span>
        <div class="new-ref-modal-form">
            <form [formGroup]="newCommentForm" (ngSubmit)="addNewComment()">
                <h1>Add New Comment</h1>
                <mat-form-field appearance="outline">
                    <mat-label>Your Comment</mat-label>
                    <input matInput formControlName="content" required>
                </mat-form-field>
                <br>
                <button type="submit" mat-raised-button>Add</button>
            </form>
        </div>
    </div>
</jw-modal>